import{S as t,M as e,a as i,T as s,V as n,G as o,C as a,P as r,B as h,I as c,b as l,c as d,d as u,e as m,f as p,g as y,F as g,h as w,W as f,i as b,A as C,D as k,H as v}from"./three-CQZDdIZO.js";import{S,B as x,V as T,C as M,Q as E,a as P,M as B,b as F,W as I,c as L}from"./cannon-CMZeK6Ld.js";!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver(t=>{for(const i of t)if("childList"===i.type)for(const t of i.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)}).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),"use-credentials"===t.crossOrigin?e.credentials="include":"anonymous"===t.crossOrigin?e.credentials="omit":e.credentials="same-origin",e}(t);fetch(t.href,e)}}();class D{constructor(t,e,i){this.scene=t,this.world=e,this.material=i,this.mesh=null,this.body=null,this.radius=.5,this.mass=5,this.maxSpeed=30,this.steerForce=15,this.moveForce=25}create(s){const n=new t(this.radius,32,32),o=new e({color:16729156,metalness:.4,roughness:.3,envMapIntensity:.5});this.mesh=new i(n,o),this.mesh.castShadow=!0,this.mesh.receiveShadow=!0,this.scene.add(this.mesh),this.addSwirl();const a=new S(this.radius);this.body=new x({mass:this.mass,shape:a,material:this.material,linearDamping:.3,angularDamping:.5,allowSleep:!1}),this.body.position.set(s.x,s.y,s.z),this.world.addBody(this.body),this.mesh.position.copy(this.body.position)}addSwirl(){const t=new s(.4*this.radius,.05,8,32),n=new e({color:16777215,metalness:.6,roughness:.2}),o=new i(t,n);o.rotation.x=Math.PI/2,this.mesh.add(o)}applyInput(t,e){const i=t*this.steerForce;this.body.applyForce(new T(i,0,0),this.body.position);const s=e*this.moveForce;this.body.applyForce(new T(0,0,s),this.body.position),this.enforceSpeedLimit()}enforceSpeedLimit(){const t=this.body.velocity.length();t>this.maxSpeed&&this.body.velocity.scale(this.maxSpeed/t,this.body.velocity)}update(){this.mesh.position.copy(this.body.position),this.mesh.quaternion.copy(this.body.quaternion)}getSpeed(){return this.body.velocity.length()}getPosition(){return(new n).copy(this.body.position)}reset(t){this.body.position.set(t.x,t.y,t.z),this.body.velocity.set(0,0,0),this.body.angularVelocity.set(0,0,0),this.body.quaternion.set(0,0,0,1),this.mesh.position.copy(this.body.position),this.mesh.quaternion.copy(this.body.quaternion),this.body.wakeUp()}isStopped(){return this.getSpeed()<.3}dispose(){this.mesh&&(this.scene.remove(this.mesh),this.mesh.geometry.dispose(),this.mesh.material.dispose()),this.body&&this.world.removeBody(this.body)}}class j{constructor(t,e,i){this.scene=t,this.world=e,this.material=i,this.pins=[],this.pinPositions=[],this.pinHeight=1.5,this.pinRadius=.15,this.pinMass=1.5,this.pinAreaZ=50,this.calculatePositions()}calculatePositions(){let t=0;for(let e=0;e<4;e++){const i=e+1,s=.7794*e;for(let n=0;n<i;n++){const i=.9*(n-e/2),o=this.pinAreaZ+s,a=this.pinHeight/2+.01;this.pinPositions.push({x:i,y:a,z:o,index:t++})}}}create(){this.pinPositions.forEach(t=>{const e=this.createPin(t);this.pins.push(e)})}createPin(s){const n=new o,r=new a(.7*this.pinRadius,this.pinRadius,.8*this.pinHeight,16),h=new e({color:16777215,roughness:.3,metalness:.1}),c=new i(r,h);c.position.y=.4*this.pinHeight,c.castShadow=!0,c.receiveShadow=!0,n.add(c);const l=new a(.4*this.pinRadius,.7*this.pinRadius,.15*this.pinHeight,16),d=new i(l,h);d.position.y=.85*this.pinHeight,d.castShadow=!0,n.add(d);const u=new t(.5*this.pinRadius,16,16),m=new i(u,h);m.position.y=.95*this.pinHeight,m.castShadow=!0,n.add(m);const p=new a(.72*this.pinRadius,1.02*this.pinRadius,.08,16),y=new e({color:16711680,roughness:.3,metalness:.1}),g=new i(p,y);g.position.y=.25*this.pinHeight,n.add(g);const w=new i(p,y);w.position.y=.35*this.pinHeight,n.add(w),n.position.set(s.x,0,s.z),this.scene.add(n);const f=new M(.7*this.pinRadius,this.pinRadius,this.pinHeight,8),b=new x({mass:this.pinMass,material:this.material,linearDamping:.4,angularDamping:.4}),C=new E;return C.setFromAxisAngle(new T(1,0,0),0),b.addShape(f,new T(0,this.pinHeight/2,0),C),b.position.set(s.x,s.y,s.z),this.world.addBody(b),{mesh:n,body:b,originalPosition:{...s},knocked:!1}}update(){this.pins.forEach(t=>{t.mesh.position.copy(t.body.position),t.mesh.position.y-=this.pinHeight/2,t.mesh.quaternion.copy(t.body.quaternion),t.knocked||(t.knocked=this.isPinKnocked(t))})}isPinKnocked(t){const e=new n(0,1,0);e.applyQuaternion(t.mesh.quaternion);return e.dot(new n(0,1,0))<.707}countKnockedDown(){return this.pins.filter(t=>this.isPinKnocked(t)).length}countStanding(){return 10-this.countKnockedDown()}resetAll(){this.pins.forEach(t=>{const e=t.originalPosition;t.body.position.set(e.x,e.y,e.z),t.body.velocity.set(0,0,0),t.body.angularVelocity.set(0,0,0),t.body.quaternion.set(0,0,0,1),t.body.wakeUp(),t.mesh.position.set(e.x,0,e.z),t.mesh.quaternion.set(0,0,0,1),t.knocked=!1,t.mesh.visible=!0})}clearKnockedPins(){this.pins.forEach(t=>{this.isPinKnocked(t)&&(t.body.position.set(100,-100,100),t.body.velocity.set(0,0,0),t.body.sleep(),t.mesh.visible=!1)})}getStatus(){return{total:this.pins.length,standing:this.countStanding(),knocked:this.countKnockedDown()}}dispose(){this.pins.forEach(t=>{this.scene.remove(t.mesh),t.mesh.traverse(t=>{t.geometry&&t.geometry.dispose(),t.material&&t.material.dispose()}),this.world.removeBody(t.body)}),this.pins=[]}}class A{constructor(){this.input={x:0,y:0},this.mode="joystick",this.gyroAvailable=!1,this.gyroPermissionGranted=!1,this.gyroSensitivity=2.5,this.gyroDeadzone=.08,this.gyroBeta=0,this.gyroGamma=0,this.gyroBetaNeutral=45,this.gyroCalibrated=!1,this.joystickContainer=null,this.joystickKnob=null,this.joystickActive=!1,this.joystickCenter={x:0,y:0},this.joystickRadius=50,this.toggleButton=null}init(){this.setupJoystick(),this.checkGyroAvailability(),this.setupToggle()}setupJoystick(){this.joystickContainer=document.getElementById("joystick-container"),this.joystickKnob=document.getElementById("joystick-knob"),this.joystickContainer&&this.joystickKnob&&(this.joystickContainer.addEventListener("touchstart",t=>this.onJoystickStart(t),{passive:!1}),this.joystickContainer.addEventListener("touchmove",t=>this.onJoystickMove(t),{passive:!1}),this.joystickContainer.addEventListener("touchend",t=>this.onJoystickEnd(t)),this.joystickContainer.addEventListener("touchcancel",t=>this.onJoystickEnd(t)),this.joystickContainer.addEventListener("mousedown",t=>this.onJoystickStart(t)),window.addEventListener("mousemove",t=>this.onJoystickMove(t)),window.addEventListener("mouseup",t=>this.onJoystickEnd(t)),this.updateJoystickDimensions(),window.addEventListener("resize",()=>this.updateJoystickDimensions()))}updateJoystickDimensions(){if(!this.joystickContainer)return;const t=this.joystickContainer.getBoundingClientRect();this.joystickCenter={x:t.left+t.width/2,y:t.top+t.height/2},this.joystickRadius=t.width/2-25}onJoystickStart(t){"joystick"===this.mode&&(t.preventDefault(),this.joystickActive=!0,this.updateJoystickDimensions(),this.onJoystickMove(t))}onJoystickMove(t){if(!this.joystickActive||"joystick"!==this.mode)return;let e,i;t.preventDefault(),t.touches&&t.touches.length>0?(e=t.touches[0].clientX,i=t.touches[0].clientY):(e=t.clientX,i=t.clientY);let s=e-this.joystickCenter.x,n=i-this.joystickCenter.y;const o=Math.sqrt(s*s+n*n);o>this.joystickRadius&&(s=s/o*this.joystickRadius,n=n/o*this.joystickRadius),this.joystickKnob.style.marginLeft=`${-25+s}px`,this.joystickKnob.style.marginTop=`${-25+n}px`,this.input.x=s/this.joystickRadius,this.input.y=-n/this.joystickRadius}onJoystickEnd(t){"joystick"===this.mode&&(this.joystickActive=!1,this.joystickKnob&&(this.joystickKnob.style.marginLeft="-25px",this.joystickKnob.style.marginTop="-25px"),this.input.x=0,this.input.y=0)}checkGyroAvailability(){if(window.DeviceOrientationEvent)if("function"==typeof DeviceOrientationEvent.requestPermission)this.gyroAvailable=!0;else{const t=e=>{null===e.beta&&null===e.gamma||(this.gyroAvailable=!0,this.gyroPermissionGranted=!0,this.setupGyro()),window.removeEventListener("deviceorientation",t)};window.addEventListener("deviceorientation",t,{once:!0}),setTimeout(()=>{window.removeEventListener("deviceorientation",t)},1e3)}}async requestGyroPermission(){if(!window.DeviceOrientationEvent)return console.log("DeviceOrientation not supported"),!1;try{if("function"==typeof DeviceOrientationEvent.requestPermission){return"granted"===await DeviceOrientationEvent.requestPermission()?(this.gyroPermissionGranted=!0,this.setupGyro(),!0):(console.log("Gyro permission denied"),!1)}return this.gyroPermissionGranted=!0,this.setupGyro(),!0}catch(t){return console.log("Error requesting gyro permission:",t),!1}}setupGyro(){window.addEventListener("deviceorientation",t=>this.onDeviceOrientation(t))}onDeviceOrientation(t){if("gyro"!==this.mode)return;const e=t.beta,i=t.gamma;if(null===e||null===i)return this.input.x=0,void(this.input.y=0);this.gyroBeta=e,this.gyroGamma=i,this.gyroCalibrated||(this.gyroBetaNeutral=Math.max(20,Math.min(70,this.gyroBeta)),this.gyroCalibrated=!0);let s=-this.gyroGamma/30;s=Math.max(-1,Math.min(1,s*this.gyroSensitivity));let n=-(this.gyroBeta-this.gyroBetaNeutral)/30;n=Math.max(-1,Math.min(1,n*this.gyroSensitivity)),Math.abs(s)<this.gyroDeadzone&&(s=0),Math.abs(n)<this.gyroDeadzone&&(n=0),this.input.x=s,this.input.y=n}resetGyroCalibration(){this.gyroCalibrated=!1}setupToggle(){this.toggleButton=document.getElementById("control-toggle"),this.toggleButton&&(this.toggleButton.addEventListener("click",async()=>{await this.toggleMode()}),this.updateToggleButton())}async toggleMode(){if("joystick"===this.mode)if(this.gyroPermissionGranted)this.mode="gyro",this.hideJoystick();else if(this.gyroAvailable){await this.requestGyroPermission()&&(this.mode="gyro",this.hideJoystick())}else console.log("Gyro not available on this device");else this.mode="joystick",this.showJoystick(),this.input={x:0,y:0};this.updateToggleButton()}updateToggleButton(){this.toggleButton&&("gyro"===this.mode?this.toggleButton.textContent="Tilt":this.toggleButton.textContent="Joystick")}showJoystick(){this.joystickContainer&&(this.joystickContainer.style.display="block")}hideJoystick(){this.joystickContainer&&(this.joystickContainer.style.display="none")}getInput(){return{...this.input}}getMode(){return this.mode}isGyroAvailable(){return this.gyroAvailable}}class G{constructor(t,e,i){this.scene=t,this.world=e,this.materials=i,this.width=8,this.length=60,this.sections=[],this.obstacles=[]}create(){this.createGround(),this.createWalls(),this.createTerrainSections(),this.createObstacles(),this.createPinArea(),this.createBallReturn(),this.createSkybox()}createGround(){const t=new r(this.width,this.length),s=new e({color:4881497,roughness:.8,metalness:.1}),n=new i(t,s);n.rotation.x=-Math.PI/2,n.position.set(0,0,this.length/2),n.receiveShadow=!0,this.scene.add(n);const o=new P(new T(this.width/2,.1,this.length/2)),a=new x({mass:0,shape:o,material:this.materials.ground});a.position.set(0,-.1,this.length/2),this.world.addBody(a),this.ground={mesh:n,body:a}}createWalls(){const t=.5,s=.3,n=new e({color:9127187,roughness:.7}),o=new h(s,t,this.length),a=new i(o,n);a.position.set(-this.width/2-.15,.25,this.length/2),a.castShadow=!0,a.receiveShadow=!0,this.scene.add(a);const r=new P(new T(.15,.25,this.length/2)),c=new x({mass:0,shape:r,material:this.materials.wall});c.position.copy(a.position),this.world.addBody(c);const l=new i(o,n);l.position.set(this.width/2+.15,.25,this.length/2),l.castShadow=!0,l.receiveShadow=!0,this.scene.add(l);const d=new x({mass:0,shape:r,material:this.materials.wall});d.position.copy(l.position),this.world.addBody(d)}createTerrainSections(){this.createTerrainSection({start:15,end:25,color:12759680,friction:.8,restitution:.1,name:"sand"}),this.createTerrainSection({start:35,end:45,color:11393254,friction:.05,restitution:.4,name:"ice"})}createTerrainSection(t){const s=t.end-t.start,n=new r(this.width-.1,s),o=new e({color:t.color,roughness:"ice"===t.name?.1:.9,metalness:"ice"===t.name?.3:0,transparent:!0,opacity:.8}),a=new i(n,o);a.rotation.x=-Math.PI/2,a.position.set(0,.01,t.start+s/2),a.receiveShadow=!0,this.scene.add(a);const h=new B(t.name);this.materials[t.name]=h;const c=new P(new T(this.width/2,.1,s/2)),l=new x({mass:0,shape:c,material:h});l.position.set(0,-.05,t.start+s/2),this.world.addBody(l);const d=new F(this.materials.ball,h,{friction:t.friction,restitution:t.restitution});this.world.addContactMaterial(d),this.sections.push({mesh:a,body:l,config:t})}createObstacles(){this.createRock(new n(-2,0,20),.8),this.createRock(new n(2.5,0,28),.6),this.createRock(new n(-1.5,0,40),.7),this.createRock(new n(1,0,32),.5),this.createBarrier(new n(0,0,12),3,.5,0),this.createBarrier(new n(-1.5,0,47),2,.3,Math.PI/6),this.createBarrier(new n(1.5,0,47),2,.3,-Math.PI/6)}createRock(t,s){const n=new c(s,0),o=new e({color:6710886,roughness:.9,flatShading:!0}),a=new i(n,o);a.position.copy(t),a.position.y=.8*s,a.rotation.set(Math.random()*Math.PI,Math.random()*Math.PI,Math.random()*Math.PI),a.castShadow=!0,a.receiveShadow=!0,this.scene.add(a);const r=new S(s),h=new x({mass:0,shape:r,material:this.materials.wall});h.position.set(t.x,s,t.z),this.world.addBody(h),this.obstacles.push({mesh:a,body:h,type:"rock"})}createBarrier(t,s,n,o){const a=new h(s,n,.3),r=new e({color:9127187,roughness:.7}),c=new i(a,r);c.position.copy(t),c.position.y=n/2,c.rotation.y=o,c.castShadow=!0,c.receiveShadow=!0,this.scene.add(c);const l=new P(new T(s/2,n/2,.15)),d=new x({mass:0,shape:l,material:this.materials.wall});d.position.copy(c.position),d.quaternion.setFromEuler(0,o,0),this.world.addBody(d),this.obstacles.push({mesh:c,body:d,type:"barrier"})}createPinArea(){const t=new r(this.width,10),s=new e({color:6636321,roughness:.6}),n=new i(t,s);n.rotation.x=-Math.PI/2,n.position.set(0,.02,55),n.receiveShadow=!0,this.scene.add(n)}createBallReturn(){const t=new r(this.width+2,5),s=new e({color:2763306,roughness:.3,metalness:.7}),n=new i(t,s);n.rotation.x=-Math.PI/2,n.position.set(0,-.5,63),n.receiveShadow=!0,this.scene.add(n);const o=new h(this.width+2,2,.5),a=new e({color:1710618,roughness:.4,metalness:.6}),c=new i(o,a);c.position.set(0,.5,65),c.castShadow=!0,c.receiveShadow=!0,this.scene.add(c);const l=new P(new T((this.width+2)/2,1,.25)),d=new x({mass:0,shape:l,material:this.materials.wall});d.position.set(0,1,65),this.world.addBody(d)}createSkybox(){const e=new t(200,32,32),s=new l({color:8900331,side:d}),n=new i(e,s);this.scene.add(n),this.createClouds(),this.createHills()}createClouds(){const e=new l({color:16777215,transparent:!0,opacity:.8});for(let s=0;s<8;s++){const s=new o,n=3+Math.floor(3*Math.random());for(let o=0;o<n;o++){const a=3+4*Math.random(),r=new t(a,8,8),h=new i(r,e);h.position.set(3*(o-n/2),2*Math.random(),2*Math.random()),s.add(h)}s.position.set(150*(Math.random()-.5),30+20*Math.random(),100*Math.random()),this.scene.add(s)}}createHills(){const t=new e({color:2263842,roughness:.9});for(let e=0;e<5;e++){const e=new u(20+15*Math.random(),15+10*Math.random(),8),s=new i(e,t);s.position.set(100*(Math.random()-.5),-5,80+40*Math.random()),s.rotation.y=Math.random()*Math.PI,this.scene.add(s)}}getTerrainAt(t){for(const e of this.sections)if(t>=e.config.start&&t<=e.config.end)return e.config.name;return"normal"}}class R{constructor(){this.frames=[],this.reset()}reset(){this.frames=Array(10).fill(null).map(()=>({throws:[],score:null,bonus:null})),this.currentFrame=0}recordThrow(t){if(this.currentFrame>=10)return;const e=this.frames[this.currentFrame];if(!e)return;const i=this.getMaxPinsForThrow();t=Math.min(Math.max(0,t),i),e.throws.push(t),this.currentFrame<9?10===e.throws[0]?(e.bonus="strike",this.currentFrame++):2===e.throws.length&&(e.throws[0]+e.throws[1]===10&&(e.bonus="spare"),this.currentFrame++):this.handle10thFrame(e),this.calculateScores()}getMaxPinsForThrow(){if(this.currentFrame>=10)return 0;const t=this.frames[this.currentFrame];if(!t)return 0;if(this.currentFrame<9)return 0===t.throws.length?10:10-t.throws[0];{const e=t.throws;if(0===e.length)return 10;if(1===e.length)return 10===e[0]?10:10-e[0];if(2===e.length)return 10===e[0]&&10===e[1]?10:10===e[0]?10-e[1]:e[0]+e[1]===10?10:0}return 0}handle10thFrame(t){const e=t.throws;1===e.length?10===e[0]&&(t.bonus="strike"):2===e.length?10===e[0]?e[1]:e[0]+e[1]===10?t.bonus="spare":this.currentFrame++:3===e.length&&this.currentFrame++}calculateScores(){let t=0;for(let e=0;e<10;e++){const i=this.frames[e];if(0===i.throws.length)continue;let s=this.getFrameBaseScore(e);if(e<9)if("strike"===i.bonus){s+=this.getNextThrows(e,2).reduce((t,e)=>t+e,0)}else if("spare"===i.bonus){s+=this.getNextThrows(e,1)[0]||0}this.canScoreFrame(e)&&(t+=s,i.score=t)}}getFrameBaseScore(t){return this.frames[t].throws.reduce((t,e)=>t+e,0)}getNextThrows(t,e){const i=[];for(let s=t+1;s<10&&i.length<e;s++)i.push(...this.frames[s].throws);return i.slice(0,e)}canScoreFrame(t){const e=this.frames[t];return 9===t?10===e.throws[0]||e.throws[0]+(e.throws[1]||0)===10?e.throws.length>=3:e.throws.length>=2:"strike"===e.bonus?this.getNextThrows(t,2).length>=2:"spare"===e.bonus?this.getNextThrows(t,1).length>=1:e.throws.length>=2}isFrameComplete(t){if(t<0||t>=10)return!0;const e=this.frames[t];if(!e)return!0;if(t<9)return 10===e.throws[0]||e.throws.length>=2;{const t=e.throws;return t.length>=3||2===t.length&&10!==t[0]&&t[0]+t[1]!==10}}getTotalScore(){let t=0;for(const e of this.frames)null!==e.score&&(t=e.score);return t}getFrames(){return this.frames.map((t,e)=>({number:e+1,throws:[...t.throws],score:t.score,bonus:t.bonus,is10th:9===e}))}getCurrentFrame(){return this.currentFrame}isGameComplete(){return this.currentFrame>=10}static formatThrow(t,e=!1,i=0){return 10!==t||e?e&&i+t===10?"/":0===t?"-":t.toString():"X"}}class H{constructor(t){this.game=t,this.frameDisplay=document.getElementById("frame-display"),this.throwDisplay=document.getElementById("throw-display"),this.scoreDisplay=document.getElementById("score-display"),this.speedGauge=document.getElementById("speed-gauge"),this.finalScore=document.getElementById("final-score"),this.scoreboard=document.getElementById("scoreboard"),this.hud=document.getElementById("hud"),this.speedGaugeContainer=document.getElementById("speed-gauge-container"),this.controlToggle=document.getElementById("control-toggle"),this.joystickContainer=document.getElementById("joystick-container"),this.liveScoresheet=document.getElementById("live-scoresheet"),this.scoresheetFrames=document.getElementById("scoresheet-frames"),this.readyScreen=document.getElementById("ready-screen"),this.readyFrame=document.getElementById("ready-frame"),this.readyThrow=document.getElementById("ready-throw"),this.pinCountDisplay=document.getElementById("pin-count-display"),this.pinCountNumber=document.getElementById("pin-count-number"),this.pinCountLabel=document.getElementById("pin-count-label"),this.celebrationDisplay=document.getElementById("celebration-display"),this.celebrationImage=document.getElementById("celebration-image"),this.celebrationText=document.getElementById("celebration-text"),this.celebrationParticles=document.getElementById("celebration-particles"),this.screens={title:document.getElementById("title-screen"),loading:document.getElementById("loading-screen"),result:document.getElementById("result-screen"),ready:document.getElementById("ready-screen")},this.celebrationEmojis={strike:"üé≥",double:"üî•",turkey:"ü¶É",spare:"‚ú®",four:"üí´",five:"‚≠ê",six:"üåü"},this.initLiveScoresheet()}initLiveScoresheet(){if(this.scoresheetFrames){this.scoresheetFrames.innerHTML="";for(let t=0;t<10;t++){const e=document.createElement("div");e.className="scoresheet-frame"+(9===t?" tenth":""),e.id=`frame-${t}`;const i=document.createElement("div");i.className="frame-header",i.textContent=(t+1).toString(),e.appendChild(i);const s=document.createElement("div");s.className="frame-throws-row";const n=9===t?3:2;for(let a=0;a<n;a++){const e=document.createElement("div");e.className="throw-cell",e.id=`frame-${t}-throw-${a}`,e.textContent="",s.appendChild(e)}e.appendChild(s);const o=document.createElement("div");o.className="frame-total",o.id=`frame-${t}-total`,o.textContent="",e.appendChild(o),this.scoresheetFrames.appendChild(e)}}}showHUD(){this.hud&&(this.hud.style.display="flex"),this.speedGaugeContainer&&(this.speedGaugeContainer.style.display="block"),this.controlToggle&&(this.controlToggle.style.display="block"),this.joystickContainer&&(this.joystickContainer.style.display="block"),this.showLiveScoresheet()}hideHUD(){this.hud&&(this.hud.style.display="none"),this.speedGaugeContainer&&(this.speedGaugeContainer.style.display="none"),this.controlToggle&&(this.controlToggle.style.display="none"),this.joystickContainer&&(this.joystickContainer.style.display="none"),this.hideLiveScoresheet()}showLiveScoresheet(){this.liveScoresheet&&this.liveScoresheet.classList.add("visible")}hideLiveScoresheet(){this.liveScoresheet&&this.liveScoresheet.classList.remove("visible")}updateLiveScoresheet(t,e){this.scoresheetFrames&&t.forEach((t,i)=>{const s=document.getElementById(`frame-${i}`);if(!s)return;i===e?s.classList.add("current"):s.classList.remove("current"),t.throws.forEach((e,s)=>{const n=document.getElementById(`frame-${i}-throw-${s}`);if(!n)return;let o="",a="throw-cell";if(i<9)0===s&&10===e?(o="X",a+=" strike"):1===s&&t.throws[0]+e===10?(o="/",a+=" spare"):o=0===e?"-":e.toString();else if(10===e)o="X",a+=" strike";else if(s>0){const i=t.throws[s-1];10!==i&&i+e===10||2===s&&10===t.throws[0]&&10!==t.throws[1]&&t.throws[1]+e===10?(o="/",a+=" spare"):o=0===e?"-":e.toString()}else o=0===e?"-":e.toString();n.textContent=o,n.className=a});const n=9===i?3:2;for(let e=t.throws.length;e<n;e++){const t=document.getElementById(`frame-${i}-throw-${e}`);t&&(t.textContent="",t.className="throw-cell")}const o=document.getElementById(`frame-${i}-total`);o&&(o.textContent=null!==t.score?t.score.toString():"")})}resetLiveScoresheet(){this.initLiveScoresheet()}updateFrame(t,e){this.frameDisplay&&(this.frameDisplay.textContent=`Frame: ${t} / 10`),this.throwDisplay&&(this.throwDisplay.textContent=`Throw: ${e}`)}updateScore(t){this.scoreDisplay&&(this.scoreDisplay.textContent=t.toString())}updateSpeedGauge(t){if(this.speedGauge){const e=Math.min(100,Math.max(0,100*t));this.speedGauge.style.height=`${e}%`}}showScreen(t){const e=document.getElementById(t);e&&e.classList.remove("hidden")}hideScreen(t){const e=document.getElementById(t);e&&e.classList.add("hidden")}showLoading(){this.showScreen("loading-screen")}hideLoading(){this.hideScreen("loading-screen")}showResults(t,e){this.hideHUD(),this.finalScore&&(this.finalScore.textContent=t.toString()),this.scoreboard&&this.buildScoreboard(e),this.showScreen("result-screen")}buildScoreboard(t){this.scoreboard&&(this.scoreboard.innerHTML="",t.forEach((t,e)=>{const i=document.createElement("div");i.className="frame-box";const s=document.createElement("div");s.className="frame-number",s.textContent=t.number.toString(),i.appendChild(s);const n=document.createElement("div");if(n.className="frame-throws",t.is10th){const e=t.throws.map((e,i)=>10===e?(0===i||10===t.throws[i-1]||1===i&&t.throws[0],"X"):i>0&&10!==t.throws[i-1]&&t.throws[i-1]+e===10?"/":0===e?"-":e.toString());n.textContent=e.join(" ")}else{const e=t.throws.map((e,i)=>R.formatThrow(e,1===i,t.throws[0]||0));n.textContent=e.join(" ")}i.appendChild(n);const o=document.createElement("div");o.className="frame-score",o.textContent=null!==t.score?t.score.toString():"",i.appendChild(o),this.scoreboard.appendChild(i)}))}showMessage(t,e=2e3){const i=document.createElement("div");i.style.cssText="\n      position: fixed;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%);\n      background: rgba(0,0,0,0.8);\n      color: white;\n      padding: 20px 40px;\n      border-radius: 10px;\n      font-size: 24px;\n      font-weight: bold;\n      z-index: 1000;\n      animation: fadeIn 0.3s ease-out;\n    ",i.textContent=t,document.body.appendChild(i),setTimeout(()=>{i.style.animation="fadeOut 0.3s ease-out",setTimeout(()=>{document.body.removeChild(i)},300)},e)}showStrike(){this.showMessage("STRIKE!",1500)}showSpare(){this.showMessage("SPARE!",1500)}showGutter(){this.showMessage("Gutter Ball!",1e3)}showReadyScreen(t,e){if(this.readyFrame&&(this.readyFrame.textContent=`${t}„Éï„É¨„Éº„É†`),this.readyThrow){const t=1===e?"1ÊäïÁõÆ":2===e?"2ÊäïÁõÆ":"3ÊäïÁõÆ";this.readyThrow.textContent=t}this.showScreen("ready-screen")}hideReadyScreen(){this.hideScreen("ready-screen")}showPinCount(t,e=!1){if(this.pinCountDisplay&&this.pinCountNumber)return this.pinCountNumber.textContent=t.toString(),this.pinCountNumber.className=e?"gutter":"",this.pinCountLabel.textContent=e?"„Ç¨„Çø„Éº":"Êú¨",this.pinCountDisplay.classList.remove("hidden"),new Promise(t=>{setTimeout(()=>{this.hidePinCount(),t()},1500)})}hidePinCount(){this.pinCountDisplay&&this.pinCountDisplay.classList.add("hidden")}async showCelebration(t){if(!this.celebrationDisplay)return;const e={strike:"„Çπ„Éà„É©„Ç§„ÇØ!",double:"„ÉÄ„Éñ„É´!",turkey:"„Çø„Éº„Ç≠„Éº!",spare:"„Çπ„Éö„Ç¢!",four:"„Éï„Ç©„Éº!",five:"„Éï„Ç°„Ç§„Éñ!",six:"„Ç∑„ÉÉ„ÇØ„Çπ!"},i={strike:"assets/images/celebration_strike.png",double:"assets/images/celebration_double.png",turkey:"assets/images/celebration_turkey.png",spare:"assets/images/celebration_spare.png",four:"assets/images/celebration_strike.png",five:"assets/images/celebration_strike.png",six:"assets/images/celebration_strike.png"};if(this.celebrationText&&(this.celebrationText.textContent=e[t]||"„Éä„Ç§„Çπ!",this.celebrationText.className=t),this.celebrationImage){const e=i[t];if(e){const i=document.createElement("img");i.src=e,i.alt=t,i.onerror=()=>{const e=this.celebrationEmojis[t]||"üéâ";this.celebrationImage.innerHTML=`<span class="emoji-fallback">${e}</span>`},this.celebrationImage.innerHTML="",this.celebrationImage.appendChild(i)}else{const e=this.celebrationEmojis[t]||"üéâ";this.celebrationImage.innerHTML=`<span class="emoji-fallback">${e}</span>`}}return this.createParticles(t),this.celebrationDisplay.classList.remove("hidden"),new Promise(t=>{setTimeout(()=>{this.hideCelebration(),t()},2500)})}hideCelebration(){this.celebrationDisplay&&this.celebrationDisplay.classList.add("hidden"),this.celebrationParticles&&(this.celebrationParticles.innerHTML="")}createParticles(t){if(!this.celebrationParticles)return;this.celebrationParticles.innerHTML="";const e={strike:["#ff4444","#ff8800","#ffdd00"],double:["#ff8800","#ffdd00","#ff4444"],turkey:["#ffdd00","#ff8800","#8B4513"],spare:["#00ff88","#00cc6a","#88ffaa"],default:["#ffdd00","#ff8800","#00ff88"]},i=e[t]||e.default;for(let s=0;s<30;s++){const t=document.createElement("div");t.className="particle",t.style.left=100*Math.random()+"%",t.style.backgroundColor=i[Math.floor(Math.random()*i.length)],t.style.animationDelay=.5*Math.random()+"s",t.style.animationDuration=`${1.5+Math.random()}s`,this.celebrationParticles.appendChild(t)}}getStrikeType(t){switch(t){case 1:return"strike";case 2:return"double";case 3:return"turkey";case 4:return"four";case 5:return"five";case 6:return"six";default:return t>6?"six":"strike"}}}class q{constructor(){this.audioContext=null,this.sounds={},this.enabled=!0,this.volume=.5,this.soundConfigs={pinHit:{type:"impact",frequency:200,duration:.15},strike:{type:"fanfare",notes:[523,659,784,1047],duration:.8},spare:{type:"success",notes:[392,523,659],duration:.5},gutter:{type:"fail",frequency:100,duration:.3},throw:{type:"whoosh",duration:.2},cheer:{type:"cheer",duration:1}}}init(){if(!this.audioContext)try{this.audioContext=new(window.AudioContext||window.webkitAudioContext)}catch(t){console.log("Web Audio not supported"),this.enabled=!1}}async resume(){this.audioContext&&"suspended"===this.audioContext.state&&await this.audioContext.resume()}play(t){if(!this.enabled||!this.audioContext)return;this.resume();const e=this.soundConfigs[t];if(e)switch(e.type){case"impact":this.playImpact(e);break;case"fanfare":this.playFanfare(e);break;case"success":this.playSuccess(e);break;case"fail":this.playFail(e);break;case"whoosh":this.playWhoosh(e);break;case"cheer":this.playCheer(e)}}playImpact(t){const e=this.audioContext.createOscillator(),i=this.audioContext.createGain();e.type="square",e.frequency.setValueAtTime(t.frequency,this.audioContext.currentTime),e.frequency.exponentialRampToValueAtTime(50,this.audioContext.currentTime+t.duration),i.gain.setValueAtTime(.3*this.volume,this.audioContext.currentTime),i.gain.exponentialRampToValueAtTime(.001,this.audioContext.currentTime+t.duration),e.connect(i),i.connect(this.audioContext.destination),e.start(),e.stop(this.audioContext.currentTime+t.duration)}playFanfare(t){t.notes.forEach((t,e)=>{const i=this.audioContext.createOscillator(),s=this.audioContext.createGain();i.type="sine",i.frequency.setValueAtTime(t,this.audioContext.currentTime);const n=this.audioContext.currentTime+.15*e;s.gain.setValueAtTime(0,n),s.gain.linearRampToValueAtTime(.4*this.volume,n+.05),s.gain.exponentialRampToValueAtTime(.001,n+.3),i.connect(s),s.connect(this.audioContext.destination),i.start(n),i.stop(n+.4)})}playSuccess(t){t.notes.forEach((t,e)=>{const i=this.audioContext.createOscillator(),s=this.audioContext.createGain();i.type="triangle",i.frequency.setValueAtTime(t,this.audioContext.currentTime);const n=this.audioContext.currentTime+.1*e;s.gain.setValueAtTime(0,n),s.gain.linearRampToValueAtTime(.3*this.volume,n+.03),s.gain.exponentialRampToValueAtTime(.001,n+.2),i.connect(s),s.connect(this.audioContext.destination),i.start(n),i.stop(n+.25)})}playFail(t){const e=this.audioContext.createOscillator(),i=this.audioContext.createGain();e.type="sawtooth",e.frequency.setValueAtTime(t.frequency,this.audioContext.currentTime),e.frequency.exponentialRampToValueAtTime(30,this.audioContext.currentTime+t.duration),i.gain.setValueAtTime(.2*this.volume,this.audioContext.currentTime),i.gain.exponentialRampToValueAtTime(.001,this.audioContext.currentTime+t.duration),e.connect(i),i.connect(this.audioContext.destination),e.start(),e.stop(this.audioContext.currentTime+t.duration)}playWhoosh(t){const e=this.audioContext.sampleRate*t.duration,i=this.audioContext.createBuffer(1,e,this.audioContext.sampleRate),s=i.getChannelData(0);for(let r=0;r<e;r++)s[r]=(2*Math.random()-1)*(1-r/e);const n=this.audioContext.createBufferSource(),o=this.audioContext.createBiquadFilter(),a=this.audioContext.createGain();n.buffer=i,o.type="bandpass",o.frequency.setValueAtTime(1e3,this.audioContext.currentTime),o.frequency.exponentialRampToValueAtTime(100,this.audioContext.currentTime+t.duration),a.gain.setValueAtTime(.15*this.volume,this.audioContext.currentTime),a.gain.exponentialRampToValueAtTime(.001,this.audioContext.currentTime+t.duration),n.connect(o),o.connect(a),a.connect(this.audioContext.destination),n.start()}playCheer(t){for(let e=0;e<5;e++){const e=this.audioContext.createOscillator(),i=this.audioContext.createGain();e.type="sine";const s=300+200*Math.random();e.frequency.setValueAtTime(s,this.audioContext.currentTime);for(let t=0;t<10;t++){const i=this.audioContext.currentTime+.1*t;e.frequency.setValueAtTime(s+100*Math.random()-50,i)}i.gain.setValueAtTime(0,this.audioContext.currentTime),i.gain.linearRampToValueAtTime(.08*this.volume,this.audioContext.currentTime+.1),i.gain.setValueAtTime(.08*this.volume,this.audioContext.currentTime+t.duration-.3),i.gain.exponentialRampToValueAtTime(.001,this.audioContext.currentTime+t.duration),e.connect(i),i.connect(this.audioContext.destination),e.start(this.audioContext.currentTime+.1*Math.random()),e.stop(this.audioContext.currentTime+t.duration)}}playPinHits(t){for(let e=0;e<Math.min(t,5);e++)setTimeout(()=>{this.play("pinHit")},50*e+30*Math.random())}toggle(){return this.enabled=!this.enabled,this.enabled}setVolume(t){this.volume=Math.max(0,Math.min(1,t))}}class N{constructor(){this.state="title",this.paused=!1,this.currentFrame=0,this.currentThrow=0,this.lastPinCount=10,this.consecutiveStrikes=0,this.pinHitDetected=!1,this.initialPinCount=10,this.scene=null,this.camera=null,this.renderer=null,this.clock=new m,this.world=null,this.materials={},this.ball=null,this.pins=null,this.course=null,this.controls=null,this.ui=null,this.scoreManager=new R,this.soundManager=new q,this.cameraOffset=new n(0,8,-12),this.cameraLookOffset=new n(0,0,10),this.ballStartPosition=new n(0,1,0),this.ballStopped=!1,this.ballStopTimer=0,this.pinSettleTimer=0,this.init()}init(){this.initRenderer(),this.initPhysics(),this.initScene(),this.initEntities(),this.initControls(),this.initUI(),this.setupEventListeners(),this.animate()}initRenderer(){const t=document.getElementById("game-container");this.scene=new p,this.scene.background=new y(8900331),this.scene.fog=new g(8900331,50,200),this.camera=new w(60,window.innerWidth/window.innerHeight,.1,500),this.camera.position.set(0,10,-15),this.camera.lookAt(0,0,20),this.renderer=new f({antialias:!0,powerPreference:"high-performance"}),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.setPixelRatio(Math.min(window.devicePixelRatio,2)),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=b,t.insertBefore(this.renderer.domElement,t.firstChild),window.addEventListener("resize",()=>this.onResize())}initPhysics(){this.world=new I,this.world.gravity.set(0,-9.82,0),this.world.broadphase=new L(this.world),this.world.solver.iterations=10,this.world.allowSleep=!0,this.materials.ball=new B("ball"),this.materials.ground=new B("ground"),this.materials.pin=new B("pin"),this.materials.wall=new B("wall"),this.world.addContactMaterial(new F(this.materials.ball,this.materials.ground,{friction:.3,restitution:.3})),this.world.addContactMaterial(new F(this.materials.ball,this.materials.pin,{friction:.5,restitution:.6})),this.world.addContactMaterial(new F(this.materials.ball,this.materials.wall,{friction:.3,restitution:.4})),this.world.addContactMaterial(new F(this.materials.pin,this.materials.ground,{friction:.8,restitution:.2})),this.world.addContactMaterial(new F(this.materials.pin,this.materials.pin,{friction:.5,restitution:.3}))}initScene(){const t=new C(16777215,.6);this.scene.add(t);const e=new k(16777215,.8);e.position.set(30,50,30),e.castShadow=!0,e.shadow.mapSize.width=2048,e.shadow.mapSize.height=2048,e.shadow.camera.near=1,e.shadow.camera.far=150,e.shadow.camera.left=-50,e.shadow.camera.right=50,e.shadow.camera.top=50,e.shadow.camera.bottom=-50,this.scene.add(e);const i=new v(8900331,10017165,.3);this.scene.add(i)}initEntities(){this.course=new G(this.scene,this.world,this.materials),this.course.create(),this.ball=new D(this.scene,this.world,this.materials.ball),this.ball.create(this.ballStartPosition),this.pins=new j(this.scene,this.world,this.materials.pin),this.pins.create()}initControls(){this.controls=new A,this.controls.init()}initUI(){this.ui=new H(this),this.soundManager.init()}setupEventListeners(){var t,e,i,s;null==(t=document.getElementById("start-btn"))||t.addEventListener("click",()=>{this.soundManager.init(),this.startGame()}),null==(e=document.getElementById("restart-btn"))||e.addEventListener("click",()=>{this.restartGame()}),null==(i=document.getElementById("throw-btn"))||i.addEventListener("click",()=>{this.beginThrow()}),null==(s=document.getElementById("control-toggle"))||s.addEventListener("click",()=>{this.controls.toggleMode()});const n=document.getElementById("enable-gyro-btn"),o=document.getElementById("gyro-status");n&&(this.updateGyroButtonState(n,o),n.addEventListener("click",async()=>{n.disabled=!0,o.textContent="Requesting permission...",o.className="status-text";await this.controls.requestGyroPermission()?(n.textContent="‚úÖ Tilt Controls Enabled",n.classList.add("enabled"),o.textContent="Tilt your device to control the ball!",o.className="status-text success","gyro"!==this.controls.mode&&(this.controls.mode="gyro",this.controls.hideJoystick(),this.controls.updateToggleButton())):(n.disabled=!1,o.textContent="Permission denied. Use joystick instead.",o.className="status-text error")}))}updateGyroButtonState(t,e){var i,s;const n=(null==(s=(i=this.controls).isGyroAvailable)?void 0:s.call(i))??!1,o=this.controls.gyroPermissionGranted??!1;n?o&&(t.textContent="‚úÖ Tilt Controls Enabled",t.classList.add("enabled"),e.textContent="Tilt your device to control the ball!",e.className="status-text success"):(t.textContent="üéÆ Joystick Only",t.disabled=!0,e.textContent="Tilt controls not available on this device",e.className="status-text")}startGame(){this.currentFrame=0,this.currentThrow=0,this.lastPinCount=10,this.consecutiveStrikes=0,this.scoreManager.reset(),this.ui.hideScreen("title-screen"),this.ui.showHUD(),this.ui.resetLiveScoresheet(),this.ui.updateLiveScoresheet(this.scoreManager.getFrames(),this.currentFrame),this.showReadyScreen()}showReadyScreen(){this.state="ready",this.ball.reset(this.ballStartPosition),this.ballStopped=!1,this.ballStopTimer=0,this.pinHitDetected=!1,this.camera.position.copy(this.ballStartPosition).add(this.cameraOffset),this.camera.lookAt(this.ballStartPosition.clone().add(this.cameraLookOffset)),this.initialPinCount=this.lastPinCount,this.ui.showReadyScreen(this.currentFrame+1,this.currentThrow+1)}beginThrow(){"ready"===this.state&&(this.ui.hideReadyScreen(),this.soundManager.play("throw"),this.state="playing",this.controls.resetGyroCalibration&&this.controls.resetGyroCalibration())}restartGame(){this.ui.hideScreen("result-screen"),this.startGame()}resetForThrow(){this.showReadyScreen()}resetPinsForNewFrame(){this.pins.resetAll(),this.lastPinCount=10}async endThrow(){const t=this.pins.countKnockedDown(),e=t-(10-this.lastPinCount);this.lastPinCount=10-t,e>0&&this.soundManager.playPinHits(e),this.scoreManager.recordThrow(e),this.ui.updateScore(this.scoreManager.getTotalScore()),this.ui.updateFrame(this.currentFrame+1,this.currentThrow+1),this.ui.updateLiveScoresheet(this.scoreManager.getFrames(),this.currentFrame);const i=0===this.currentThrow&&10===e,s=1===this.currentThrow&&10===t,n=0===e&&0===this.currentThrow;if(this.ui.showPinCount(e,n),await this.delay(1500),this.ui.hidePinCount(),i){this.consecutiveStrikes++;const t=this.ui.getStrikeType(this.consecutiveStrikes);this.soundManager.play("strike"),this.soundManager.play("cheer"),await this.ui.showCelebration(t),await this.delay(2e3),this.ui.hideCelebration()}else s?(this.consecutiveStrikes=0,this.soundManager.play("spare"),await this.ui.showCelebration("spare"),await this.delay(1500),this.ui.hideCelebration()):n?(this.consecutiveStrikes=0,this.soundManager.play("gutter")):i||(this.consecutiveStrikes=0);if(this.scoreManager.isFrameComplete(this.currentFrame)){if(this.currentThrow=0,this.currentFrame++,this.currentFrame>=10)return void this.endGame();this.resetPinsForNewFrame()}else this.currentThrow++,this.pins.clearKnockedPins();this.resetForThrow()}delay(t){return new Promise(e=>setTimeout(e,t))}endGame(){this.state="result",this.ui.showResults(this.scoreManager.getTotalScore(),this.scoreManager.getFrames())}pause(){this.paused=!0}resume(){this.paused=!1,this.clock.getDelta()}onResize(){const t=window.innerWidth,e=window.innerHeight;this.camera.aspect=t/e,this.camera.updateProjectionMatrix(),this.renderer.setSize(t,e)}animate(){if(requestAnimationFrame(()=>this.animate()),this.paused)return;const t=Math.min(this.clock.getDelta(),.1);this.world.step(1/60,t,3),this.update(t),this.renderer.render(this.scene,this.camera)}update(t){if("playing"!==this.state&&"throwing"!==this.state&&"waiting"!==this.state)return;const e=this.controls.getInput();if("playing"!==this.state&&"throwing"!==this.state||(0===e.x&&0===e.y||(this.state="throwing",this.ball.applyInput(e.x,e.y)),this.ball.update(),this.updateCamera(),this.ui.updateSpeedGauge(this.ball.getSpeed()/this.ball.maxSpeed)),"throwing"===this.state){const e=this.ball.getSpeed(),i=this.ball.getPosition().y,s=this.ball.getPosition().z;if(s>62)return this.state="waiting",void(this.pinSettleTimer=0);if(i<-5&&s<62)return this.state="processing",void this.handleFallOff();const n=this.pins.countKnockedDown()-(10-this.initialPinCount);n>0&&!this.pinHitDetected&&(this.pinHitDetected=!0,this.soundManager.playPinHits(Math.min(n,5))),this.pinHitDetected&&(s>62||e<1)&&(this.state="waiting",this.pinSettleTimer=0),!this.pinHitDetected&&e<.5?(this.ballStopTimer+=t,this.ballStopTimer>1.5&&(this.state="waiting",this.pinSettleTimer=0)):this.pinHitDetected||(this.ballStopTimer=0)}"waiting"===this.state&&(this.pinSettleTimer+=t,this.pinSettleTimer>2&&(this.state="processing",this.endThrow())),this.pins.update()}async handleFallOff(){const t=this.pins.countKnockedDown(),e=t-(10-this.lastPinCount);this.lastPinCount=10-t,this.scoreManager.recordThrow(e);const i=0===this.currentThrow&&10===e,s=1===this.currentThrow&&10===t,n=0===e;if(e>0&&this.soundManager.playPinHits(e),this.ui.updateScore(this.scoreManager.getTotalScore()),this.ui.updateFrame(this.currentFrame+1,this.currentThrow+1),this.ui.updateLiveScoresheet(this.scoreManager.getFrames(),this.currentFrame),this.ui.showPinCount(e,n),await this.delay(1500),this.ui.hidePinCount(),i){this.consecutiveStrikes++;const t=this.ui.getStrikeType(this.consecutiveStrikes);this.soundManager.play("strike"),this.soundManager.play("cheer"),await this.ui.showCelebration(t),await this.delay(2e3),this.ui.hideCelebration()}else s?(this.consecutiveStrikes=0,this.soundManager.play("spare"),await this.ui.showCelebration("spare"),await this.delay(1500),this.ui.hideCelebration()):n?(this.consecutiveStrikes=0,this.soundManager.play("gutter")):this.consecutiveStrikes=0;if(this.scoreManager.isFrameComplete(this.currentFrame)){if(this.currentThrow=0,this.currentFrame++,this.currentFrame>=10)return void this.endGame();this.resetPinsForNewFrame()}else this.currentThrow++,this.pins.clearKnockedPins();this.resetForThrow()}updateCamera(){const t=this.ball.getPosition(),e=t.clone().add(this.cameraOffset);this.camera.position.lerp(e,.05);const i=t.clone().add(this.cameraLookOffset),s=new n;this.camera.getWorldDirection(s);const o=i.clone().sub(this.camera.position).normalize();s.lerp(o,.05),this.camera.lookAt(this.camera.position.clone().add(s.multiplyScalar(10)))}}document.addEventListener("DOMContentLoaded",()=>{const t=new N;window.game=t,document.addEventListener("visibilitychange",()=>{document.hidden?t.pause():t.resume()}),console.log("Bowling Adventure - Simple Integrated Architecture"),console.log("Version: 1.0.0")});
