import{c as x,j as s,u as v,a as C,L as k}from"./index-N1P5ay2K.js";import{L,r as a}from"./router-DZPHsDLW.js";import{B as S,L as M}from"./Layout-B-RYqJTg.js";import{L as I}from"./lock-BZtXG7nA.js";import{m as B,c as h}from"./firestore-g5Y3pXIM.js";import"./firebase-B_HbBKsG.js";/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=x("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=x("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);function E({classroom:e}){return s.jsxs(L,{to:`/classrooms/${e.id}`,className:"block bg-dark-800 rounded-xl overflow-hidden hover:ring-2 hover:ring-primary-500/50 transition-all group",children:[s.jsxs("div",{className:"relative h-40 bg-dark-700",children:[e.thumbnailUrl?s.jsx("img",{src:e.thumbnailUrl,alt:e.name,className:"w-full h-full object-cover",loading:"lazy"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center",children:s.jsx(S,{className:"w-12 h-12 text-dark-500"})}),!e.isPublic&&s.jsx("div",{className:"absolute top-3 right-3 bg-dark-900/80 rounded-full p-1.5",children:s.jsx(I,{className:"w-4 h-4 text-yellow-500"})})]}),s.jsxs("div",{className:"p-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-white group-hover:text-primary-400 transition-colors truncate",children:e.name}),s.jsx("p",{className:"mt-1 text-sm text-gray-400 line-clamp-2",children:e.description||"No description"})]})]})}function O(){const[e,p]=a.useState([]),[f,d]=a.useState(!0),[i,g]=a.useState(""),[l,y]=a.useState(!1),{user:o}=v(),{addToast:m}=C();a.useEffect(()=>{(async()=>{try{d(!0);let t;if(l&&o){const c=(await B.getByUser(o.uid)).map(n=>n.classroomId);t=(await h.getAll()).filter(n=>n.ownerId===o.uid||c.includes(n.id))}else t=(await h.getAll()).filter(c=>c.isPublic||o&&c.ownerId===o.uid);p(t)}catch{m("error","Failed to load classrooms")}finally{d(!1)}})()},[o,l,m]);const u=a.useMemo(()=>{const r=i.toLowerCase();return e.filter(t=>t.name.toLowerCase().includes(r)||t.description.toLowerCase().includes(r))},[e,i]),j=a.useCallback(()=>{y(r=>!r)},[]),b=a.useCallback(r=>{g(r.target.value)},[]),w=a.useMemo(()=>i?"No classrooms match your search":l?"You haven't joined any classrooms yet":"No classrooms available",[i,l]);return s.jsx(M,{children:s.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",role:"main",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-8",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-white",children:"Classrooms"}),s.jsx("p",{className:"text-gray-400 mt-1",children:"Browse and join classrooms to access content"})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",role:"search",children:[s.jsxs("div",{className:"relative",children:[s.jsx(A,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none","aria-hidden":"true"}),s.jsx("input",{type:"search",placeholder:"Search classrooms...",value:i,onChange:b,"aria-label":"Search classrooms",className:"w-full sm:w-64 pl-10 pr-4 py-2 bg-dark-800 border border-dark-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500/50 focus:border-primary-500"})]}),o&&s.jsxs("button",{onClick:j,"aria-pressed":l,className:`flex items-center gap-2 px-4 py-2 rounded-lg border transition-colors focus:outline-none focus:ring-2 focus:ring-primary-400 focus:ring-offset-2 focus:ring-offset-dark-900 ${l?"bg-primary-500 border-primary-500 text-white":"bg-dark-800 border-dark-600 text-gray-300 hover:border-gray-500"}`,children:[s.jsx(q,{className:"w-4 h-4","aria-hidden":"true"}),"My Classrooms"]})]})]}),f?s.jsx("div",{className:"flex justify-center py-20","aria-busy":"true",children:s.jsx(k,{size:"lg"})}):u.length===0?s.jsx("div",{className:"text-center py-20",role:"status",children:s.jsx("p",{className:"text-gray-400 text-lg",children:w})}):s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",role:"list","aria-label":"Classrooms",children:u.map(r=>s.jsx(E,{classroom:r},r.id))})]})})}export{O as ClassroomList};
