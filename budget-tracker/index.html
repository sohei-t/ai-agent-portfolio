<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Budget Tracker - WBS Task & Progress Management">
  <title>Budget Tracker</title>
  <link rel="preload" href="css/main.css" as="style">
  <link rel="preload" href="js/app.js" as="script" crossorigin>
  <link rel="stylesheet" href="css/main.css">
  <link rel="dns-prefetch" href="/">
</head>
<body>
  <div id="app">
    <!-- Header -->
    <header class="header" role="banner">
      <div class="header__left">
        <a href="#/dashboard" class="header__logo" aria-label="Dashboard">
          <span class="header__logo-icon" aria-hidden="true">&#9776;</span>
          <h1 class="header__title">Budget Tracker</h1>
        </a>
      </div>
      <nav class="header__nav" role="navigation" aria-label="Main navigation">
        <a href="#/dashboard" class="nav-link" data-route="dashboard">Dashboard</a>
        <a href="#/tasks" class="nav-link" data-route="tasks">Tasks</a>
      </nav>
      <div class="header__right">
        <div class="search-container" id="searchContainer">
          <button class="btn btn--icon" id="searchToggle" aria-label="Search" title="Search (Ctrl+K)">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
          </button>
          <div class="search-dropdown" id="searchDropdown" hidden>
            <input type="text" id="searchInput" class="search-input" placeholder="Search tasks..." aria-label="Search tasks">
            <div id="searchResults" class="search-results" role="listbox"></div>
          </div>
        </div>
        <button class="btn btn--icon" id="themeToggle" aria-label="Toggle dark mode" title="Toggle dark mode (Ctrl+D)">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>
        </button>
        <button class="btn btn--icon" id="shortcutsToggle" aria-label="Keyboard shortcuts" title="Keyboard shortcuts (?)">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="4" width="20" height="16" rx="2"/><line x1="6" y1="8" x2="6" y2="8"/><line x1="10" y1="8" x2="10" y2="8"/><line x1="14" y1="8" x2="14" y2="8"/><line x1="18" y1="8" x2="18" y2="8"/><line x1="8" y1="12" x2="16" y2="12"/></svg>
        </button>
      </div>
    </header>

    <!-- Main content area -->
    <main class="main" id="mainContent" role="main">
      <div class="loading-spinner" id="loadingSpinner">
        <div class="spinner" aria-label="Loading"></div>
      </div>
    </main>

    <!-- Toast container -->
    <div id="toastContainer" class="toast-container" role="alert" aria-live="polite"></div>

    <!-- Modal overlay -->
    <div id="modalOverlay" class="modal-overlay" hidden>
      <div class="modal" role="dialog" aria-modal="true">
        <div class="modal__header">
          <h2 class="modal__title" id="modalTitle"></h2>
          <button class="btn btn--icon modal__close" id="modalClose" aria-label="Close">&times;</button>
        </div>
        <div class="modal__body" id="modalBody"></div>
        <div class="modal__footer" id="modalFooter"></div>
      </div>
    </div>

    <!-- Keyboard shortcuts dialog -->
    <div id="shortcutsDialog" class="modal-overlay" hidden>
      <div class="modal shortcuts-modal" role="dialog" aria-modal="true" aria-labelledby="shortcutsTitle">
        <div class="modal__header">
          <h2 class="modal__title" id="shortcutsTitle">Keyboard Shortcuts</h2>
          <button class="btn btn--icon modal__close" id="shortcutsClose" aria-label="Close">&times;</button>
        </div>
        <div class="modal__body">
          <div class="shortcuts-grid">
            <div class="shortcut-group">
              <h3>Navigation</h3>
              <div class="shortcut-item"><kbd>G</kbd> <kbd>D</kbd> <span>Go to Dashboard</span></div>
              <div class="shortcut-item"><kbd>G</kbd> <kbd>T</kbd> <span>Go to Tasks</span></div>
            </div>
            <div class="shortcut-group">
              <h3>Actions</h3>
              <div class="shortcut-item"><kbd>N</kbd> <span>New Task</span></div>
              <div class="shortcut-item"><kbd>Ctrl</kbd>+<kbd>K</kbd> <span>Search</span></div>
              <div class="shortcut-item"><kbd>Ctrl</kbd>+<kbd>D</kbd> <span>Toggle Dark Mode</span></div>
              <div class="shortcut-item"><kbd>Esc</kbd> <span>Close Modal / Cancel</span></div>
              <div class="shortcut-item"><kbd>?</kbd> <span>Show Shortcuts</span></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- App scripts (ES modules) -->
  <script type="module" src="js/app.js"></script>
</body>
</html>
